<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shon Gur — Security Researcher</title>
  <meta name="description" content="Shon Gur — security research, tooling & projects" />
  <link rel="preload" as="image" href="assets/security-researcher.png">
  <style>
    :root{
      --text:#eaf2ff; --accent-blue:#64b5f6; --accent-red:#ef5350;
      --layer-hero:1; --layer-blue:0; --layer-red:0; /* JS animates these */
    }
    *{box-sizing:border-box} html,body{height:100%;margin:0}
    body{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:var(--text);min-height:100svh;overflow-x:hidden}

    /* ===== Fixed background stack (smoothly crossfaded by JS) ===== */
    #bg{position:fixed; inset:0; z-index:0; pointer-events:none}
    #bg .layer{position:absolute; inset:0; opacity:0; transition:opacity .25s linear}
    /* First screen BLACK */
    #bg .hero{background:linear-gradient(180deg,#000 0%,#000 100%);opacity:var(--layer-hero)}
    /* Profiles screen DEEP BLUE */
    #bg .blue{background:
        radial-gradient(900px 600px at 15% -10%, rgba(100,181,246,.03), transparent 40%),
        linear-gradient(180deg,#031225 0%, #020812 100%);
      opacity:var(--layer-blue)}
    /* Personal screen RED stays the same */
    #bg .red{background:radial-gradient(900px 600px at 85% 110%, rgba(239,83,80,.12), transparent 40%),linear-gradient(180deg, hsl(330 70% 8%) 0%, hsl(350 70% 3%) 100%);opacity:var(--layer-red)}

    /* scanline overlay */
    body::after{content:"";position:fixed;inset:0;z-index:1;pointer-events:none;background:repeating-linear-gradient(to bottom, rgba(0,0,0,0) 0 2px, rgba(0,0,0,.18) 2px 3px),radial-gradient(circle at 20% 10%, rgba(255,255,255,.015) 0 2px, transparent 3px),radial-gradient(circle at 70% 80%, rgba(255,255,255,.012) 0 2px, transparent 3px);mix-blend-mode:overlay}

    main{position:relative;z-index:2;scroll-snap-type:y mandatory}
    section{min-height:100svh;display:grid;place-items:center;padding:clamp(3rem,6vw,6rem) 1.25rem;scroll-snap-align:start;position:relative}

    /* Always-on actions top-right */
    .site-actions{position:fixed;top:16px;right:16px;z-index:5;display:flex;gap:.5rem}
    .site-actions a{display:inline-block;padding:.55rem .9rem;border-radius:10px;text-decoration:none;font-weight:700;border:1px solid rgba(255,255,255,.18);color:var(--text);background:rgba(5,8,13,.45);backdrop-filter:saturate(120%) blur(4px)}
    .site-actions a.primary{background:var(--accent-blue);color:#06121c;border-color:rgba(0,0,0,.35)}

    .card{width:min(1100px,94vw);background:rgba(6,10,16,.82);border:1px solid rgba(100,181,246,.25);border-radius:20px;padding:clamp(1.1rem,2.6vw,2rem);box-shadow:0 30px 80px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,255,0.03)}
    .badge{display:inline-block;padding:.25rem .5rem;border:1px dashed rgba(100,181,246,.45);color:var(--accent-blue);border-radius:8px;font-weight:600;letter-spacing:.03em}
    h1{font-size:clamp(2rem,6vw,3.4rem);margin:0 0 .5rem;letter-spacing:.02em;display:flex;align-items:center;gap:.75rem;justify-content:center}
    .logo{width:56px;height:56px;border-radius:12px;border:1px solid rgba(255,255,255,.2);object-fit:cover}
    h2{font-size:clamp(1.4rem,4.5vw,2.2rem);margin:0 0 .75rem}
    h3{font-size:clamp(1.1rem,3.5vw,1.4rem);margin:.25rem 0 .25rem}
    p{margin:0 0 1rem;line-height:1.65;opacity:.96}

    .row{display:grid;grid-template-columns:1fr;gap:1rem}
    @media(min-width:1000px){.row.two-col{grid-template-columns:1fr 1fr}}
    .icon-link{display:inline-flex;align-items:center;gap:.6rem;text-decoration:none;color:var(--text);margin-bottom:.6rem}
    .brand-icon{width:44px;height:44px;border-radius:12px;border:1px solid rgba(255,255,255,.18);padding:6px;background:rgba(255,255,255,.05);box-shadow:0 0 10px rgba(100,181,246,.35);display:grid;place-items:center}
    .brand-icon svg{width:100%;height:100%;fill:currentColor;color:#eaf2ff}
    .brand-icon img.icon-svg{width:100%;height:100%;filter:invert(1) brightness(2)}
    .mini{display:flex;align-items:center;gap:.9rem}
    .avatar{width:64px;height:64px;border-radius:12px;border:1px solid rgba(255,255,255,.2);object-fit:cover}
    .stats{opacity:.9;font-size:.95rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
    .repo{border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:.9rem;background:rgba(255,255,255,.03)}
    .repo h4{margin:0 0 .25rem;font-size:1.05rem}
    .repo .meta{font-size:.9rem;opacity:.85;display:flex;gap:.8rem}

    .nav-dots{position:fixed;right:16px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:10px;z-index:3}
    .nav-dots button{width:10px;height:10px;border-radius:50%;border:none;opacity:.45;background:var(--accent-blue);cursor:pointer;box-shadow:0 0 8px rgba(100,181,246,.8)}
    .nav-dots button[aria-current="true"]{opacity:1;transform:scale(1.2);background:var(--accent-red);box-shadow:0 0 8px rgba(239,83,80,.8)}
    @media(prefers-reduced-motion:reduce){.nav-dots{display:none}}
    /* anti-flash: ensure a solid dark base and GPU compositing */
  html, body { background:#000; color-scheme: dark; }
  #bg { background:#000; }
  #bg .layer { will-change: opacity; backface-visibility: hidden; transform: translateZ(0); }
  .site-actions .gmail-ico{display:inline-grid;place-items:center;margin-right:.45rem}
  /* Hide LinkedIn fallback text link under the badge */
  .badge-base__link.LI-simple-link{font-size:0!important;color:transparent!important;line-height:0!important;text-decoration:none!important}
</style>
</head>
<body>
  <!-- fixed background layers -->
  <div id="bg" aria-hidden="true">
    <div class="layer hero"></div>
    <div class="layer blue"></div>
    <div class="layer red"></div>
  </div>

  <!-- always-on contact actions -->
  <div class="site-actions">
    <a class="primary contact-btn" target="_blank" rel="noreferrer" href="https://mail.google.com/mail/u/0/#inbox?compose=GTvVlcSGKZRNjKJDjhKvQTPkzFGkXbvFRglljgwwlnhDwzzlfzZsbzKstbbZzDNppPfPnLZFLFPdL">
      <span class="gmail-ico" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="18" height="18"><path fill="#EA4335" d="M12 13.5L2.4 6.6V19a1 1 0 001 1h17.2a1 1 0 001-1V6.6L12 13.5z"/><path fill="#34A853" d="M3.4 5L12 11l8.6-6h-2.2L12 8 5.6 5H3.4z"/><path fill="#FBBC05" d="M3.4 5H5.6L12 8l6.4-3h2.2L12 11 3.4 5z"/><path fill="#4285F4" d="M21.6 5H20l.2.1-8.2 5.9L3.4 5H2.4A1 1 0 001 6v1.2L12 14l11-6.8V6a1 1 0 00-1.4-1z"/></svg>
      </span>
      <span>Contact</span>
    </a>
  </div>

  <main id="app">
    <!-- HERO (black bg, icon next to name) -->
    <section id="s1">
      <div class="card" style="text-align:center">
        <span class="badge">Security Researcher</span>
        <h1><img class="logo" src="assets/security-researcher.png" alt="logo">Shon Gur Arie</h1>
        <p>Low‑Level Research • C++/Python Tooling • Reverse Engineering.</p>
      </div>
    </section>

    <!-- PROFILES (blue layer target) -->
    <section id="profiles">
      <div class="card">
        <h2>Profiles</h2>
        <div class="row two-col">
          <!-- LinkedIn -->
          <div>
            <a class="icon-link" href="https://www.linkedin.com/in/shongur/" target="_blank" rel="noreferrer">
              <span class="brand-icon" aria-hidden="true">
                <svg role="img" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M22.225 0H1.771C.792 0 0 .774 0 1.728v20.543C0 23.226.792 24 1.771 24h20.451C23.2 24 24 23.226 24 22.271V1.728C24 .774 23.2 0 22.225 0zM7.064 20.452H3.69V9h3.374v11.452zM5.377 7.433a2.062 2.062 0 1 1 0-4.125 2.062 2.062 0 0 1 0 4.125zM20.452 20.452h-3.374v-5.564c0-1.328-.025-3.037-1.853-3.037-1.851 0-2.135 1.447-2.135 2.944v5.657H9.716V9h3.237v1.561h.046c.451-.855 1.555-1.756 3.201-1.756 3.422 0 4.252 2.254 4.252 5.187v6.46z"/></svg>
              </span>
              <strong>LinkedIn</strong>
            </a>
            <div class="li-wrap" style="margin:.25rem 0 .9rem">
              <div class="badge-base LI-profile-badge" data-locale="en_US" data-size="medium" data-theme="dark" data-type="HORIZONTAL" data-vanity="shongur" data-version="v1">
                <a class="badge-base__link LI-simple-link" href="https://www.linkedin.com/in/shongur/">Shon Gur</a>
              </div>
            </div>
            <h3>Projects (Starred)</h3>
            <div id="starred" class="grid" aria-live="polite"></div>
          </div>

          <!-- GitHub -->
          <div>
            <a class="icon-link" href="https://github.com/ShonGur" target="_blank" rel="noreferrer">
              <span class="brand-icon" aria-hidden="true">
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
              </span>
              <strong>GitHub</strong>
            </a>
            <div class="mini" style="margin-bottom:.5rem">
              <img id="gh-avatar" class="avatar" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub avatar"/>
              <div>
                <div id="gh-name" style="font-weight:700">Loading…</div>
                <div id="gh-login" class="stats">@ShonGur</div>
                <div class="stats" id="gh-stats" style="margin-top:.25rem">&nbsp;</div>
              </div>
            </div>
            <h3>Pinned repositories</h3>
            <div id="pinned" class="grid" aria-live="polite"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PERSONAL (red layer target) -->
    <section id="personal">
      <div class="card">
        <h2>Personal</h2>
        <div class="row two-col">
          <!-- Steam -->
          <div>
            <a class="icon-link" href="https://steamcommunity.com/profiles/76561198937367718/" target="_blank" rel="noreferrer">
              <span class="brand-icon" aria-hidden="true">
                <img class="icon-svg" src="https://store.cloudflare.steamstatic.com/public/shared/images/responsive/share_steam_logo.png" alt="Steam"/>
              </span>
              <strong>Steam</strong>
            </a>
            <div class="mini" style="margin-bottom:.5rem">
              <img id="steam-avatar" class="avatar" src="https://store.cloudflare.steamstatic.com/public/shared/images/responsive/share_steam_logo.png" alt="Steam avatar"/>
              <div>
                <div id="steam-name" style="font-weight:700">Steam</div>
                <div class="stats" id="steam-level">Level: —</div>
              </div>
            </div>
          </div>

          <!-- Lichess -->
          <div>
            <a class="icon-link" href="https://lichess.org/@/ShonGur" target="_blank" rel="noreferrer">
              <span class="brand-icon" aria-hidden="true" style="font-size:28px;line-height:1">♞</span>
              <strong>Lichess</strong>
            </a>
            <div class="mini" style="margin-bottom:.5rem">
              <div class="stats" id="lichess-rapid">Rapid: —</div>
            </div>
          </div>

          <!-- Spotify -->
          <div>
            <a class="icon-link" href="#" id="spotify-link" rel="noreferrer">
              <span class="brand-icon" aria-hidden="true">
                <svg role="img" viewBox="0 0 24 24"><title>Spotify</title><path d="M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm5.487 17.309a.748.748 0 01-1.03.254c-2.824-1.727-6.38-2.117-10.57-1.161a.75.75 0 11-.326-1.463c4.592-1.024 8.5-.575 11.6 1.34a.748.748 0 01.326 1.03zm1.45-3.242a.93.93 0 01-1.277.315c-3.234-1.99-8.161-2.57-12.002-1.41a.932.932 0 01-.527-1.785c4.255-1.256 9.65-.607 13.318 1.6a.93.93 0 01.488 1.28zm.12-3.373c-3.844-2.279-10.235-2.49-13.94-1.356a1.115 1.115 0 01-.64-2.14c4.313-1.292 11.32-1.04 15.736 1.6a1.116 1.116 0 01-1.156 1.9z"/></svg>
              </span>
              <strong>Spotify</strong>
            </a>
            <div class="mini" style="margin-bottom:.5rem">
              <img id="sp-avatar" class="avatar" src="https://developer.spotify.com/images/guidelines/design/icon3@2x.png" alt="Spotify avatar"/>
              <div>
                <div id="sp-name" style="font-weight:700">Spotify</div>
                <div class="stats" id="sp-stats">—</div>
                <div class="stats" id="sp-more">&nbsp;</div>
              </div>
            </div>
            <div class="stats"><button id="sp-connect" style="display:none;padding:.35rem .65rem;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:rgba(5,8,13,.45);color:var(--text)">Connect Spotify (owner)</button></div>
          </div>

          <!-- Discord -->
          <div>
            <a class="icon-link" href="#" id="discord-link" rel="noreferrer">
              <span class="brand-icon" aria-hidden="true">
                <svg role="img" viewBox="0 0 24 24"><title>Discord</title><path d="M20.317 4.369a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.211.375-.444.862-.608 1.246-1.835-.275-3.68-.275-5.486 0-.164-.392-.405-.871-.617-1.246a.077.077 0 00-.079-.037A19.736 19.736 0 003.68 4.369c-.012 0-.024.006-.032.017C.533 8.115-.319 11.73.099 15.295a.082.082 0 00.031.055c2.052 1.504 4.043 2.416 5.992 3.03a.077.077 0 00.084-.027c.461-.63.873-1.295 1.226-1.994a.076.076 0 00-.041-.104 13.2 13.2 0 01-1.872-.892.077.077 0 01-.008-.128c.126-.094.252-.192.372-.291a.074.074 0 01.077-.01c3.927 1.793 8.18 1.793 12.061 0a.074.074 0 01.078.01c.12.099.246.197.372.291a.077.077 0 01-.007.128 12.3 12.3 0 01-1.873.892.076.076 0 00-.04.105c.36.699.772 1.364 1.225 1.994a.077.077 0 00.085.027c1.96-.614 3.951-1.526 6.003-3.03a.077.077 0 00.03-.055c.5-4.192-.838-7.77-3.55-10.909a.061.061 0 00-.032-.017zM8.02 14.708c-1.18 0-2.155-1.085-2.155-2.418 0-1.332.955-2.418 2.155-2.418 1.21 0 2.175 1.096 2.155 2.418 0 1.333-.955 2.418-2.155 2.418zm7.975 0c-1.18 0-2.155-1.085-2.155-2.418 0-1.332.955-2.418 2.155-2.418 1.21 0 2.175 1.096 2.155 2.418 0 1.333-.955 2.418-2.155 2.418z"/></svg>
              </span>
              <strong>Discord</strong>
            </a>
            <div class="mini" style="margin-bottom:.5rem">
              <img id="dc-avatar" class="avatar" src="assets/discord-avatar.png" alt="Discord avatar"/>
              <div>
                <div id="dc-name" style="font-weight:700">sweatycs</div>
                <div class="stats">Member since 2018</div>
                <div class="stats"><button id="dc-msg" style="padding:.35rem .65rem;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:rgba(5,8,13,.45);color:var(--text)">Message in Discord</button></div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>

  <div class="nav-dots" id="dots" aria-hidden="true"></div>

  <script>
    const CONFIG = {
      githubUser: 'ShonGur',
      lichessUser: 'ShonGur',
      steamId: '76561198937367718',
      steamProxyUrl: 'https://restless-thunder-2f46.shoncpp.workers.dev/',
      spotifyUser: 'o4diur3po28i75it7whkdj6rt',
      spotifyProxyUrl: 'https://flat-cell-c518.shoncpp.workers.dev/spotify/public',
      // Fill this with your Discord user ID (see instructions below)
      discordId: '471253673129803776'
    };

    // Smooth background crossfades: hero -> blue -> red
    (() => {
      const root = document.documentElement;
      const sections = [...document.querySelectorAll('section')];
      const s2 = document.getElementById('profiles');
      const s3 = document.getElementById('personal');
      const dots = document.getElementById('dots');
      sections.forEach((sec,i)=>{const b=document.createElement('button');b.setAttribute('aria-label','Go to section '+(i+1));b.addEventListener('click',()=>sec.scrollIntoView({behavior:'smooth',block:'start'}));dots.appendChild(b)});
      const clamp=(v,a,b)=>Math.min(b,Math.max(a,v)); const ss=(e0,e1,x)=>{const t=clamp((x-e0)/(e1-e0),0,1);return t*t*(3-2*t)};
      const update = () => {
        const y = scrollY;
        const s2Top = s2.getBoundingClientRect().top + y;
        const s3Top = s3.getBoundingClientRect().top + y;
        const sectionH = innerHeight;

        // Earlier, stronger crossfades with constant-sum behavior
        // 1) BLACK -> BLUE: start well before section 2, finish shortly before it
        const t1 = ss(s2Top - sectionH * 0.95, s2Top - sectionH * 0.15, y); // 0..1
        const t1s = Math.pow(t1, 0.8);   // accelerate fade-in
        const hero = 1 - t1s;
        const bluePre = t1s;

        // 2) BLUE -> RED: start before section 3, finish near its top
        const t2 = ss(s3Top - sectionH * 0.85, s3Top - sectionH * 0.05, y);
        const t2s = Math.pow(t2, 0.7);   // quicker/clearer handoff
        const red  = t2s;
        const blue = clamp(bluePre * (1 - t2s), 0, 1); // blue holds fully between the two crosses

        // Apply
        root.style.setProperty('--layer-hero', hero.toFixed(3));
        root.style.setProperty('--layer-blue', blue.toFixed(3));
        root.style.setProperty('--layer-red',  red.toFixed(3));

        // nav dots
        let idx = sections.length - 1;
        for (let i=0;i<sections.length;i++){
          const r = sections[i].getBoundingClientRect();
          if (r.top >= 0 && r.top < innerHeight*0.6) { idx = i; break; }
        }
        dots.querySelectorAll('button').forEach((b,j)=>b.setAttribute('aria-current', j===idx));
      }; let ticking=!1;addEventListener('scroll',()=>{if(!ticking){requestAnimationFrame(()=>{update();ticking=!1});ticking=!0}},{passive:!0});addEventListener('resize',update);update()})();

    // GitHub + pinned + starred
    (async()=>{try{const u=CONFIG.githubUser;const pr=await fetch(`https://api.github.com/users/${u}`);if(pr.ok){const d=await pr.json(),$=id=>document.getElementById(id);if(d.avatar_url)$('gh-avatar').src=d.avatar_url;$('gh-name').textContent=d.name||'GitHub';$('gh-login').textContent='@'+(d.login||u);$('gh-stats').textContent=`${d.public_repos??'-'} repos · ${d.followers??'-'} followers`}let pinned=[];try{const r=await fetch(`https://gh-pinned-repos.egoist.dev/?username=${u}`);if(r.ok)pinned=await r.json()}catch(e){}if(!Array.isArray(pinned)||!pinned.length){const rr=await fetch(`https://api.github.com/users/${u}/repos?per_page=100&sort=updated`);if(rr.ok){const all=await rr.json();all.sort((a,b)=>(b.stargazers_count||0)-(a.stargazers_count||0));pinned=all.slice(0,6).map(x=>({repo:x.name,description:x.description,stars:x.stargazers_count,language:x.language,link:x.html_url}))}}document.getElementById('pinned').innerHTML=(pinned||[]).map(p=>`<article class="repo"><h4><a href="${p.link||`https://github.com/${u}/${p.repo}`}" target="_blank" rel="noreferrer">${p.repo}</a></h4><p style="opacity:.9">${p.description||''}</p><div class="meta"><span>★ ${p.stars??''}</span><span>${p.language||''}</span></div></article>`).join('')||'No repos to show.';const sr=await fetch(`https://api.github.com/users/${u}/starred?per_page=6`);if(sr.ok){const stars=await sr.json();document.getElementById('starred').innerHTML=stars.slice(0,6).map(x=>`<article class="repo"><h4><a href="${x.html_url}" target="_blank" rel="noreferrer">${x.full_name}</a></h4><p style="opacity:.9">${x.description||''}</p><div class="meta"><span>★ ${x.stargazers_count||0}</span><span>${x.language||''}</span></div></article>`).join('')}}catch(e){}})();

    // Steam via Worker
    (async()=>{try{const base=(CONFIG.steamProxyUrl||'').trim(),id=CONFIG.steamId;if(!base)return;const r=await fetch(`${base}?steamid=${encodeURIComponent(id)}`);if(!r.ok)return;const d=await r.json();if(d.avatar)document.getElementById('steam-avatar').src=d.avatar;if(d.name)document.getElementById('steam-name').textContent=d.name;if(typeof d.level!=='undefined')document.getElementById('steam-level').textContent=`Level: ${d.level}`}catch(e){}})();

    // Lichess Rapid rating
    (async()=>{try{const u=CONFIG.lichessUser;const r=await fetch(`https://lichess.org/api/user/${encodeURIComponent(u)}`);if(!r.ok)return;const d=await r.json();const rating=d?.perfs?.rapid?.rating;if(rating)document.getElementById('lichess-rapid').textContent=`Rapid: ${rating}`}catch(e){}})();

    // Spotify via Worker (owner OAuth; public fetch)
    (async()=>{
      try{
        const base=(CONFIG.spotifyProxyUrl||'').trim();
        if(!base) return;
        const r = await fetch(base);
        if(r.status===401){
          // Not authorized yet; show connect button (owner only)
          const btn=document.getElementById('sp-connect');
          btn.style.display='inline-block';
          btn.onclick=()=>{ window.open('https://flat-cell-c518.shoncpp.workers.dev/spotify/login','_blank','noopener'); };
          return;
        }
        if(!r.ok) return;
        const d=await r.json();
        if(d.image)document.getElementById('sp-avatar').src=d.image;
        document.getElementById('sp-name').textContent=d.name||'Spotify';
        const bits=[];
        if(typeof d.followers==='number') bits.push(`${d.followers} followers`);
        if(typeof d.playlists==='number') bits.push(`${d.playlists} playlists`);
        if(typeof d.minutes_24h==='number') bits.push(`${d.minutes_24h} min last 24h`);
        document.getElementById('sp-stats').textContent=bits.join(' · ')||'—';
        if(Array.isArray(d.top_artists)&&d.top_artists.length){
          document.getElementById('sp-more').textContent=`Top artists: ${d.top_artists.slice(0,3).join(', ')}`;
        } else { document.getElementById('sp-more').textContent=''; }
      }catch(e){}
    })();

    // Spotify app vs browser
    (function(){const appUrl='spotify://user/o4diur3po28i75it7whkdj6rt';const webUrl='https://open.spotify.com/user/o4diur3po28i75it7whkdj6rt';const link=document.getElementById('spotify-link');link.addEventListener('click',e=>{e.preventDefault();setTimeout(()=>{window.open(webUrl,'_blank','noopener')},900);window.location.href=appUrl})})();

    // Discord: fetch avatar/name if discordId is set; click to DM in app
    (async()=>{
      const id = (CONFIG.discordId||'').trim();
      const btn = document.getElementById('dc-msg');
      const lnk = document.getElementById('discord-link');
      const nameEl = document.getElementById('dc-name');
      const avEl = document.getElementById('dc-avatar');

      if(id){
        try{
          const r = await fetch(`https://api.lanyard.rest/v1/users/${id}`);
          if(r.ok){
            const j = await r.json();
            const u = j?.data?.discord_user;
            if(u){
              const avatar = u.avatar ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=128` : `https://cdn.discordapp.com/embed/avatars/0.png`;
              avEl && (avEl.src = avatar);
              nameEl && (nameEl.textContent = u.global_name || u.username || 'sweatycs');
              if(lnk){ lnk.href = `https://discord.com/users/${id}`; }
              if(btn){ btn.onclick = async ()=>{ try{ await navigator.clipboard.writeText(u.username); }catch(_){} window.location.href = `discord://-/users/${id}`; } }
              return;
            }
          }
        }catch(_){/* ignore */}
      }
      // fallback: copy provided handle and open app root
      if(btn){ btn.onclick = async ()=>{ try{ await navigator.clipboard.writeText('sweatycs'); }catch(_){} window.location.href = 'discord://'; } }
      if(lnk){ lnk.onclick = (e)=>{ e.preventDefault(); window.location.href = 'discord://'; } }
    })();
  </script>
  <script async defer src="https://platform.linkedin.com/badges/js/profile.js"></script>
</body>
</html>
